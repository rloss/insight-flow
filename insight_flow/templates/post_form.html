{% extends "base.html" %}
{% block title %}{{ mode == "edit" and "글 수정하기" or "글쓰기" }} - Insight Flow{% endblock %}

{% block content %}
  <h2>{{ mode == "edit" and "✏ 글 수정하기" or "📝 인사이트 작성하기" }}</h2>

  <form method="POST" style="display: flex; flex-direction: column; gap: 1rem; max-width: 600px;">
    <input type="text" name="title" placeholder="제목" value="{{ post.title if post else '' }}" required />
    <textarea name="content" rows="10" placeholder="본문 입력" required>{{ post.content if post else '' }}</textarea>
    <input type="text" name="author" placeholder="작성자" value="{{ post.author if post else '' }}" />

    <div>
      <label>카테고리 (복수 선택)</label><br />
      {% for cat in categories %}
        <label>
          <input type="checkbox" name="categories" value="{{ cat }}"
                 {% if post and cat in post.categories %}checked{% endif %}>
          {{ cat }}
        </label>
      {% endfor %}
    </div>

    <input type="text" name="tags" placeholder="태그 (쉼표 구분)" value="{{ post.tags if post else '' }}" />

    <button type="submit">{{ mode == "edit" and "수정 완료" or "작성 완료" }}</button>
  </form>
{% endblock %}
